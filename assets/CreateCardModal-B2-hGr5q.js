import{r as i,j as a}from"./index-DsFqEVfq.js";import{M as h,a as M,b as f,c as E,d as S,e as T,C as y,m as D,v as I,W as B}from"./validateCardForm-DCqSEpRp.js";import{b as O,e as R,A as l}from"./indexedDB-hkH7-2RZ.js";import{a as g,B as c,s as m}from"./toast-BXX00uJE.js";import"./getImageUrl-VL8xLnK6.js";const o={buffer:null,type:""},C={id:"",cardHeaderImage:o,pointImage:o,cardImage:o,currentPoints:0,title:"",totalPoints:10,redemptionList:[]},b=x=>{const{isOpen:p,onClose:s}=x,t=g(),[r,n]=i.useState(C),[j,d]=i.useState({}),u=async()=>{if(I(r,d))try{const e={...r,id:crypto.randomUUID()};await R(e),n(C),m(t,"集點卡新增成功！！",l.SUCCESS),s()}catch(e){console.error(e),m(t,"集點卡新增失敗，請稍後再試。",l.ERROR,a.jsx(B,{mt:"5px"}))}};return a.jsxs(h,{isOpen:p,onClose:s,closeOnOverlayClick:!1,isCentered:!0,scrollBehavior:"inside",size:"sm",children:[a.jsx(M,{}),a.jsxs(f,{children:[a.jsx(E,{children:"新增"}),a.jsx(S,{}),a.jsx(T,{children:a.jsx(y,{mode:O.CREATE,cardData:r,setCardData:n,errors:j,setErrors:d})}),a.jsxs(D,{children:[a.jsx(c,{mr:3,onClick:s,children:"取消"}),a.jsx(c,{colorScheme:"pink",onClick:u,children:"新增"})]})]})]})};export{b as default};
