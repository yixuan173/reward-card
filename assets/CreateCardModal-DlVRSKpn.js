import{r as i,j as a}from"./index-Dr4ijXKz.js";import{M as h,a as f,b as M,c as S,d as y,e as I,C as T,m as B,v as D,W as E}from"./validateCardForm-F8NJdXX4.js";import{c as g,A as c}from"./indexedDB-Bs-VvnGT.js";import{a as v,B as l,s as m}from"./toast-CuYQmoM6.js";import"./getImageUrl-VL8xLnK6.js";const o={buffer:null,type:""},C={id:"",cardHeaderImage:o,pointImage:o,cardImage:o,currentPoints:0,title:"",totalPoints:10,redemptionList:[]},A=x=>{const{isOpen:p,onClose:r}=x,t=v(),[s,n]=i.useState(C),[j,d]=i.useState({}),u=async()=>{if(D(s,d))try{const e={...s,id:crypto.randomUUID()};await g(e),n(C),m(t,"集點卡新增成功！！",c.SUCCESS),r()}catch(e){console.error(e),m(t,"集點卡新增失敗，請稍後再試。",c.ERROR,a.jsx(E,{mt:"5px"}))}};return a.jsxs(h,{isOpen:p,onClose:r,closeOnOverlayClick:!1,isCentered:!0,scrollBehavior:"inside",size:"sm",children:[a.jsx(f,{}),a.jsxs(M,{children:[a.jsx(S,{children:"新增"}),a.jsx(y,{}),a.jsx(I,{children:a.jsx(T,{mode:"create",cardData:s,setCardData:n,errors:j,setErrors:d})}),a.jsxs(B,{children:[a.jsx(l,{mr:3,onClick:r,children:"取消"}),a.jsx(l,{colorScheme:"pink",onClick:u,children:"新增"})]})]})]})};export{A as default};
