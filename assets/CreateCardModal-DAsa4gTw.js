import{r as i,j as a}from"./index-MtHr8zwo.js";import{M as u,a as M,b as f,c as E,d as D,e as S,C as T,m as y,v as I,W as B}from"./validateCardForm-DwWc9knu.js";import{c as O,h as R,A as c}from"./indexedDB-VbUPTGWN.js";import{a as g,B as l,s as m}from"./toast-BILEt0hQ.js";import"./getImageUrl-D1gqjwtB.js";const o={buffer:null,type:""},C={id:"",cardHeaderImage:o,pointImage:o,cardImage:o,currentPoints:0,title:"",totalPoints:10,redemptionList:[],create:0},F=x=>{const{isOpen:p,onClose:e}=x,t=g(),[r,n]=i.useState(C),[h,d]=i.useState({}),j=async()=>{if(I(r,d))try{const s={...r,id:crypto.randomUUID(),create:Date.now()};await R(s),n(C),m(t,"集點卡新增成功！！",c.SUCCESS),e()}catch(s){console.error(s),m(t,"集點卡新增失敗，請稍後再試。",c.ERROR,a.jsx(B,{mt:"5px"}))}};return a.jsxs(u,{isOpen:p,onClose:e,closeOnOverlayClick:!1,isCentered:!0,scrollBehavior:"inside",size:"sm",children:[a.jsx(M,{}),a.jsxs(f,{children:[a.jsx(E,{children:"新增"}),a.jsx(D,{}),a.jsx(S,{children:a.jsx(T,{mode:O.CREATE,cardData:r,setCardData:n,errors:h,setErrors:d})}),a.jsxs(y,{children:[a.jsx(l,{mr:3,onClick:e,children:"取消"}),a.jsx(l,{colorScheme:"pink",onClick:j,children:"新增"})]})]})]})};export{F as default};
